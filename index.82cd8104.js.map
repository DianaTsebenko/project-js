{"mappings":"AAAA,MAAMA,EAAaC,SAASC,eAAe,eACrCC,EAAaF,SAASC,eAAe,eACrCE,EAAcH,SAASI,cAAc,gBACrCC,EAAgBL,SAASI,cAAc,mBACvCE,EAAcN,SAASC,eAAe,aAI5C,IAAIM,EAAc,EACdC,EAAe,GACfC,EAAiB,GAgErBC,eAAeC,EAASC,GACtBA,EAAMC,iBACNN,EAAc,EAEdC,EAAeL,EAAYW,MAAMC,OACjCN,EAAiBJ,EAAcS,YAEzBE,EAAWR,EAAcC,EAAgBF,E,CAQjDG,eAAeM,EAAWC,EAAOC,EAASC,GACxC,IACE,MAAMC,QA1EVV,eAA2BO,EAAQ,GAAIC,EAAU,GAAIC,EAAO,GAC1D,IAAIE,EAAY,sGAA+EF,YAE3FF,IACFI,GAAa,YAAYJ,KAGvBC,IACFG,GAAa,gBAAgBH,KAG/B,MAAMI,QAAiBC,MAAMF,GAC7B,IAAKC,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,QAG3B,aADmBJ,EAASK,M,CA2DLC,CAAYX,EAAOC,EAASC,IAlDrD,SAAsBC,GAMpB,GALoB,IAAhBb,IACFR,EAAW8B,UAAY,KAKtBT,EAAOU,YACPV,EAAOU,UAAUV,QACiB,IAAnCA,EAAOU,UAAUV,OAAOW,OAGxB,YADAzB,EAAY0B,MAAMC,QAAU,QAG9B3B,EAAY0B,MAAMC,QAAU,QAE5B,MAAMC,EAAWd,EAAOU,UAAUV,OAC/Be,KAAIvB,GAGI,2FAzBb,SAA6BwB,GAC3B,MAAMC,EAAcD,EAAOE,MAAKC,GAAOA,EAAIC,IAAIC,SAAS,YACxD,OAAOJ,EAAcA,EAAYG,IAAMJ,EAAO,GAAGI,G,CAqB5BE,CAAoB9B,EAAMwB,iBAIPxB,EAAM+B,yEACZ/B,EAAM+B,+CACN/B,EAAMgC,MAAMC,MAAMC,wDACdlC,EAAMkB,UAAUiB,OAAO,GAAGJ,sCAI7DK,KAAK,IACRjD,EAAWkD,mBAAmB,YAAaf,E,CAqBzCgB,CAAa9B,E,CACb,MAAO+B,GACPC,QAAQD,MAAM,0BAA2BA,E,EAjF7CjD,EAAWmD,iBAAiB,SAAU1C,GACtCN,EAAcgD,iBAAiB,SAAU1C,GACzCL,EAAY+C,iBAAiB,SAqE7B3C,iBACEH,UACMS,EAAWR,EAAcC,EAAgBF,E,IAYjDS,EAAW,GAAI,GAAI","sources":["src/index.js"],"sourcesContent":["const eventsList = document.getElementById('events-list');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.querySelector('.searchInput');\nconst countrySelect = document.querySelector('.country_select');\nconst loadMoreBtn = document.getElementById('load-more');\n\nconst apiKey = 'EtDAV1vyZ1Jbh6c6G3DrYAs7JMLAasp6';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet currentCountry = '';\nconst perPage = 20;\n\nsearchForm.addEventListener('submit', onSubmit);\ncountrySelect.addEventListener('change', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function fetchEvents(query = '', country = '', page = 0) {\n  let searchUrl = `https://app.ticketmaster.com/discovery/v2/events.json?apikey=${apiKey}&page=${page}&size=${perPage}`;\n\n  if (query) {\n    searchUrl += `&keyword=${query}`;\n  }\n\n  if (country) {\n    searchUrl += `&countryCode=${country}`;\n  }\n\n  const response = await fetch(searchUrl);\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  const data = await response.json();\n  return data;\n}\n\nfunction getImageByCondition(images) {\n  const sourceImage = images.find(img => img.url.includes('SOURCE'));\n  return sourceImage ? sourceImage.url : images[0].url;\n}\n\nfunction renderEvents(events) {\n  if (currentPage === 1) {\n    eventsList.innerHTML = '';\n  }\n\n  // Check if there are any events\n  if (\n    !events._embedded ||\n    !events._embedded.events ||\n    events._embedded.events.length === 0\n  ) {\n    loadMoreBtn.style.display = 'none';\n    return;\n  }\n  loadMoreBtn.style.display = 'block';\n\n  const eventmap = events._embedded.events\n    .map(event => {\n      const imageUrl = getImageByCondition(event.images);\n\n      return `<li class=\"event_thumb\">\n        <a href=\"\" class=\"event_link\">\n            <img src=\"${imageUrl}\" alt=\"${event.name} preview\" class=\"event_img\" />\n            <p class=\"event_name\">${event.name}</p>\n            <p class=\"event_date\">${event.dates.start.localDate}</p>\n            <p class=\"event_location\">${event._embedded.venues[0].name}</p>\n        </a>\n    </li>`;\n    })\n    .join('');\n  eventsList.insertAdjacentHTML('beforeend', eventmap);\n}\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  currentPage = 1;\n\n  currentQuery = searchInput.value.trim();\n  currentCountry = countrySelect.value;\n\n  await loadEvents(currentQuery, currentCountry, currentPage);\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  await loadEvents(currentQuery, currentCountry, currentPage);\n}\n\nasync function loadEvents(query, country, page) {\n  try {\n    const events = await fetchEvents(query, country, page);\n    renderEvents(events);\n  } catch (error) {\n    console.error('Error rendering events:', error);\n  }\n}\n\nloadEvents('', '', 1);\n"],"names":["$1f0dc3b9307be026$var$eventsList","document","getElementById","$1f0dc3b9307be026$var$searchForm","$1f0dc3b9307be026$var$searchInput","querySelector","$1f0dc3b9307be026$var$countrySelect","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$currentQuery","$1f0dc3b9307be026$var$currentCountry","async","$1f0dc3b9307be026$var$onSubmit","event","preventDefault","value","trim","$1f0dc3b9307be026$var$loadEvents","query","country","page","events","searchUrl","response","fetch","ok","Error","status","json","$1f0dc3b9307be026$var$fetchEvents","innerHTML","_embedded","length","style","display","eventmap","map","images","sourceImage","find","img","url","includes","$1f0dc3b9307be026$var$getImageByCondition","name","dates","start","localDate","venues","join","insertAdjacentHTML","$1f0dc3b9307be026$var$renderEvents","error","console","addEventListener"],"version":3,"file":"index.82cd8104.js.map"}